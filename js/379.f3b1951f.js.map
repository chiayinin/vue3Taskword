{"version":3,"file":"js/379.f3b1951f.js","mappings":"4GAAe,WAASA,GAAG,MAAM,CAACC,IAAID,EAAEA,GAAG,IAAIE,IAAIC,GAAG,SAASC,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,EAAEA,EAAEE,KAAKH,GAAGL,EAAES,IAAIL,EAAE,CAACC,KAAKK,IAAI,SAASN,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,IAAID,EAAEC,EAAEK,OAAOL,EAAEM,QAAQP,KAAK,EAAE,GAAGL,EAAES,IAAIL,EAAE,MAAMS,KAAK,SAAST,EAAEC,GAAG,IAAIC,EAAEN,EAAEO,IAAIH,GAAGE,GAAGA,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEK,OAAMC,EAAEN,EAAEO,IAAI,OAAOD,EAAEQ,QAAQC,KAAI,SAASf,GAAGA,EAAEI,EAAEC,Q,gCCEnT,MAAMW,EAAUC,IAChB,S,yGCFEC,EAAAA,EAAAA,GAAc,UAAV,SAAK,G,GACJC,MAAM,a,GACFA,MAAM,sB,GACXD,EAAAA,EAAAA,GAOQ,eANNA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,UALb,G,GAUQE,MAAA,iB,SAc2CD,MAAM,M,aAI5CA,MAAM,M,GACNA,MAAM,M,GAIRA,MAAM,0B,4BASLA,MAAM,2B,WACH,U,4BAWHA,MAAM,2B,WACH,W,6DA1DnBE,GACAH,EAAAA,EAAAA,GAiEM,MAjEN,EAiEM,EAhEJA,EAAAA,EAAAA,GA+DQ,QA/DR,EA+DQ,CA9DNI,GAQAJ,EAAAA,EAAAA,GAqDQ,6BApDNK,EAAAA,EAAAA,IAmDKC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAnDcC,EAAAA,UAARC,K,WAAXJ,EAAAA,EAAAA,IAmDK,MAnDyBK,IAAKD,EAAKE,IAAxC,EACEX,EAAAA,EAAAA,GASK,KATL,EASK,EARHA,EAAAA,EAAAA,GAOO,OANJE,OAAK,UAAAU,gBAAAA,OAA4BH,EAAKI,aACvC,6EAFF,WASFb,EAAAA,EAAAA,GAEK,WAAAc,EAAAA,EAAAA,IADAL,EAAKM,OAAK,IAEff,EAAAA,EAAAA,GAQK,WAPQS,EAAKO,QAAUP,EAAKQ,eAAAA,EAAAA,EAAAA,OAA/BZ,EAAAA,EAAAA,IAEM,MAFN,GAEMS,EAAAA,EAAAA,IADDL,EAAKO,OAAQ,MAClB,MAFA,WAGAX,EAAAA,EAAAA,IAGM,MAAAa,EAAA,EAFJlB,EAAAA,EAAAA,GAAkD,MAAlD,EAAgB,OAAGc,EAAAA,EAAAA,IAAGL,EAAKQ,cAAe,KAAE,IAC5CjB,EAAAA,EAAAA,GAA6C,MAA7C,EAAgB,SAAKc,EAAAA,EAAAA,IAAGL,EAAKO,OAAQ,KAAE,SAG3ChB,EAAAA,EAAAA,GA2BK,YA1BHA,EAAAA,EAAAA,GAyBM,MAzBN,EAyBM,EAxBJA,EAAAA,EAAAA,GAWS,UAVPmB,KAAK,SACLlB,MAAM,4BACLmB,QAAK,GAAEC,EAAAA,iBAAiBZ,EAAKE,IAC7BW,SAAUd,EAAAA,gBAAkBC,EAAKE,IAJpC,WAMEX,EAAAA,EAAAA,GAGK,IAHL,EAGK,iBAFKQ,EAAAA,gBAAkBC,EAAKE,MAE5B,GATP,MAYAX,EAAAA,EAAAA,GAWS,UAVPmB,KAAK,SACLlB,MAAM,yBACLmB,QAAK,GAAEG,EAAAA,UAAUd,EAAKE,IACtBW,SAAUd,EAAAA,gBAAkBC,EAAKE,IAJpC,WAMEX,EAAAA,EAAAA,GAGK,IAHL,EAGK,iBAFKQ,EAAAA,gBAAkBC,EAAKE,MAE5B,GATP,cArCN,aAXN,I,aAuEF,GACEa,OACE,MAAO,CACLC,SAAU,CACRC,MAAO,IAETC,SAAU,GACVC,cAAe,KAInBC,QAAS,CACPC,cACEC,KAAKC,MACF3C,IACE,0EAEF4C,MAAMC,IACLH,KAAKJ,SAAWO,EAASV,KAAKG,YAE/BQ,OAAOC,IACNC,QAAQC,IAAIF,OAIlBG,UAAU5B,EAAI6B,EAAM,GAClB,MAAMhB,EAAO,CACXiB,WAAY9B,EACZ6B,IAAAA,GAGFT,KAAKH,cAAgBjB,EAErBoB,KAAKC,MACFU,KACE,iEACD,CAAElB,KAAAA,IAEHS,MAAMC,IACLG,QAAQM,IAAIT,GACZH,KAAKH,cAAgB,GACrB9B,EAAAA,EAAAA,KAAa,eAEdqC,OAAOC,IACNC,QAAQC,IAAIF,QAKpBQ,UACEb,KAAKD,gB,SCtHT,MAAMe,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://week006/./node_modules/mitt/dist/mitt.mjs","webpack://week006/./src/libs/emitter.js","webpack://week006/./src/views/CartView.vue","webpack://week006/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from \"mitt\";\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <h2>購物車列表</h2>\n  <div class=\"container\">\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td style=\"width: 200px\">\n            <div\n              :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n            ></div>\n          </td>\n          <td>\n            {{ item.title }}\n          </td>\n          <td>\n            <div v-if=\"item.price === item.origin_price\" class=\"h5\">\n              {{ item.price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ item.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ item.price }} 元</div>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"openProductModal(item.id)\"\n                :disabled=\"isLoadingItem === item.id\"\n              >\n                <i\n                  v-show=\"isLoadingItem === item.id\"\n                  class=\"fas fa-spinner fa-pulse\"\n                ></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(item.id)\"\n                :disabled=\"isLoadingItem === item.id\"\n              >\n                <i\n                  v-show=\"isLoadingItem === item.id\"\n                  class=\"fas fa-spinner fa-pulse\"\n                ></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libs/emitter.js\";\n\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      products: [],\n      isLoadingItem: \"\",\n    };\n  },\n\n  methods: {\n    getProducts() {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((response) => {\n          this.products = response.data.products;\n        })\n        .catch((error) => {\n          console.dir(error);\n        });\n    },\n\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n\n      this.isLoadingItem = id;\n\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((response) => {\n          console.log(response);\n          this.isLoadingItem = \"\";\n          emitter.emit(\"get-cart\");\n        })\n        .catch((error) => {\n          console.dir(error);\n        });\n    },\n  },\n\n  mounted() {\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=84d90846\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\flax_\\\\Documents\\\\hexschool\\\\vue2022\\\\vue3Taskword\\\\week006\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","style","_hoisted_1","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","item","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_7","type","onClick","_ctx","disabled","$options","data","cartData","carts","products","isLoadingItem","methods","getProducts","this","$http","then","response","catch","error","console","dir","addToCart","qty","product_id","post","log","mounted","__exports__","render"],"sourceRoot":""}